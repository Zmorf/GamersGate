

<html>
	<head>
		<title>Gamers Gate</title>
		
    <style>
    #canvas {
		border: 1px solid #9C9898;
    }
    body {
		margin: 0px;
		padding: 0px;
    }
	  
	.overlay
	{
		background-color: #000;
		opacity: .7;
		filter: alpha(opacity=70);
		position: absolute; top: 0; left: 0;
		width: 100%; height: 100%;
		z-index: 10;
	}
	
	.overlayimg
	{
		background-color: #FFFFFF;
		position: absolute;
		z-index: 11;
		/*left: 50px;
		top: 50px;*/
		height: 350px;
		width: 350px;
	}

	.header
	{
		text-align: center;
	}
	  
    </style>
	
	<script type="text/javascript">
	
		
		function performAjax(cmd, value)
		{
			var xmlhttp;
			if (window.XMLHttpRequest)
			{// code for IE7+, Firefox, Chrome, Opera, Safari
				xmlhttp=new XMLHttpRequest();
			}
			else
			{// code for IE6, IE5
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange=function()
				{
					if (xmlhttp.readyState==4 && xmlhttp.status==200)
					{
						//document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
						document.getElementById('data').innerHTML += "<br/>Got response: " + xmlhttp.resonseText;
						handleAjaxByCmd(cmd, xmlhttp.responseText);
					}
				}
				document.getElementById('data').innerHTML += "<br/>Loading: " + "ajax.php?cmd=" + cmd + "&" + value;
			xmlhttp.open("GET","ajax.php?cmd=" + cmd + "&" + value,true);
			xmlhttp.send();
		}
		
		function handleAjaxByCmd(cmd, jsonResponse)
		{
		
		}
		
		function expandPhoto() {
			if(!has_layout)
			{
				var overlay = document.createElement("div");
				overlay.setAttribute("id","overlay");
				overlay.setAttribute("class", "overlay");
				overlay.onclick = restore;
				document.body.appendChild(overlay);
			
			
				var form_div = document.createElement("div");
				form_div.setAttribute("id", "overlayimg");
				form_div.setAttribute("class", "overlayimg");
				form_div.style.top = screen.height/2 - 275;
				form_div.style.left = screen.width/2 - 175;
				has_layout = true;
				
				//create layout
				var header = document.createElement("h2");
				header.innerHTML = "Header";
				header.setAttribyte("class", "header");
				form_div.appendChild(header);
				
				
				document.body.appendChild(form_div);
			}
		}
		
		function show_login_window()
		{
			if(!has_layout)
			{
				var overlay = document.createElement("div");
				overlay.setAttribute("id","overlay");
				overlay.setAttribute("class", "overlay");
				//overlay.onclick = restore;
				document.body.appendChild(overlay);
			
			
				var form_div = document.createElement("div");
				form_div.setAttribute("id", "overlayimg");
				form_div.setAttribute("class", "overlayimg");
				form_div.style.top = screen.height/2 - 275;
				form_div.style.left = screen.width/2 - 175;
				has_layout = true;
				
				
				//create layout
				var header = document.createElement("h2");
				header.innerHTML = "Login";
				header.setAttribute("class", "header");
				form_div.appendChild(header);
				
				var username_label = document.createElement("div");
				username_label.innerHTML = "Username ";
				form_div.appendChild(username_label);
				
				
				//username input
				var username_input = document.createElement("input");
				username_input.type = "text";
				username_input.id = "username";
				form_div.appendChild(username_input);
				
				var br = document.createElement("br");
				form_div.appendChild(br);
				
				
				var password_label = document.createElement("div");
				password_label.innerHTML = "Password ";
				form_div.appendChild(password_label);
				
				//password input
				var password_input = document.createElement("input");
				password_input.type = "password";
				password_input.id = "password";
				form_div.appendChild(password_input);
				
				form_div.appendChild(br);
				
				//button
				var submit_button = document.createElement("button");
				submit_button.innerHTML = "Login";
				submit_button.setAttribute("onclick", "login()");
				form_div.appendChild(submit_button);
				document.body.appendChild(form_div);
			}
			
		}
		
		function login()
		{
			var username = document.getElementById('username').value;
			var password = document.getElementById('password').value;
			
			document.getElementById('data').innerHTML += "<br/>Loading ajax";
			performAjax("employee_login", "username="+username+"&password="+password);
		}
		
		function restore() {
			document.body.removeChild(document.getElementById("overlay"));
			document.body.removeChild(document.getElementById("overlayimg"));
			has_layout = false;
		}
		
		function Computer(x, y)
		{
			this.X = x;
			this.Y = y;
			
			this.id = id_counter;
			id_counter = id_counter + 1;
			
		}
	
		function draw_computer(context, x, y)
		{
			context.beginPath();
			context.rect(x, y, 50, 50);
			context.fillStyle = 'yellow';
			context.fill();
			context.strokeStyle = 'black';
			context.stroke();
			
			var com = new Computer(x, y);
			computers[id_counter-1] = com;
			
		}
	
		function rec_draw_computer(context, start_x, start_y, size, amount_of_computers)
		{
			
			for(var i = 0; i <  amount_of_computers; i++)
			{
				draw_computer(context, start_x + (size*i), start_y);
			}
		}
		
		function mouse_handler(e)
		{
			e = e || window.event;
			var button = e.which || e.button;
			cursorX = e.pageX;
			cursorY = e.pageY;
			if(button == 1)
			{
				//alert("Cursor at X:" + cursorX + " Y:" + cursorY);
				for(var i = 0; i < computers.length; i++)
				{
					var com = computers[i];
					if((com.X < cursorX) && ((com.X+50) > cursorX) && (com.Y < cursorY) && ((com.Y+50) > cursorY))
					{
						//alert("Clicked computer " + com.id + " @ X:" + com.X + " Y:" + com.Y);
						expandPhoto();
					}
					//document.getElementById('data').innerHTML = document.getElementById('data').innerHTML + "<br/>" + "Com at X:" + com.X + " Y:" + com.Y;
				}
			}
		}
	
	</script>
	</head>

<body>

	<canvas width="800px" height="500px" id="canvas"></canvas>
	
	
	
	<div id="data"> </div>
	
	<script type="text/javascript">
		var id_counter = 0;
		var cursorX;
		var cursorY;
		var computers = new Array();
		var has_layout = false;
		var logged_in = false;
		var canvas = document.getElementById('canvas');
		var context = canvas.getContext('2d');
		
		//rec_draw_computer(context, 80, 150, 50, 10);
		//rec_draw_computer(context, 80, 200, 50, 10);
		
		
		
		if(document.layers)
		{
			document.captureEvents(Event.MOUSEDOWN);
		}
		document.onmousedown = mouse_handler;
		
		/*document.onmousemove = function(e) 
		{
			cursorX = e.pageX;
			cursorY = e.pageY;
		}*/
		
		//document.getElementById('data').innerHTML = computers.length + "   " + computers[1].X;
		
		if(logged_in == false)
		{
			show_login_window();
		}
	</script>

</body>
</html>